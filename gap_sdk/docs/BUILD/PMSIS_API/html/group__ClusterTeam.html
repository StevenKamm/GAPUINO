<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Team synchronization</title>
<title>Team synchronization</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="pulp.css" rel="stylesheet" type="text/css" />
<link href="gap.css" rel="stylesheet" type="text/css" />
<link href="images.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="printComponentTabs.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="titlerow">
  <td id="projectlogo"><img alt="Logo" src="gap-logo-55.png" /></td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief">PMSIS API</div>
    </td>
  <td id="extralogo"><img alt="GreenWaves" src="greenwaves-logo-55.png" /></td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="CMSISnav" class="tabs1">
    <ul class="tablist">
      <script type="text/javascript">
		<!--
		writeComponentTabs.call(this);
		//-->
      </script>
	  </ul>
</div>
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__ClusterTeam.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Team synchronization<div class="ingroups"><a class="el" href="group__groupDrivers.html">Drivers</a> &raquo; <a class="el" href="group__clusterDriver.html">Cluster</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaefb50573dcd73b1f767db380688753ed"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ClusterTeam.html#gaefb50573dcd73b1f767db380688753ed">pi_cl_cluster_nb_cores</a> ()</td></tr>
<tr class="memdesc:gaefb50573dcd73b1f767db380688753ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the number of cores of the cluster.  <a href="#gaefb50573dcd73b1f767db380688753ed">More...</a><br /></td></tr>
<tr class="separator:gaefb50573dcd73b1f767db380688753ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5794ffc121cc284b7178cb5b5b457a04"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ClusterTeam.html#ga5794ffc121cc284b7178cb5b5b457a04">pi_cl_team_fork</a> (int nb_cores, void(*entry)(void *), void *arg)</td></tr>
<tr class="memdesc:ga5794ffc121cc284b7178cb5b5b457a04"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fork the execution of the calling core.  <a href="#ga5794ffc121cc284b7178cb5b5b457a04">More...</a><br /></td></tr>
<tr class="separator:ga5794ffc121cc284b7178cb5b5b457a04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga39986d8afa000c44e22752383a48ae23"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ClusterTeam.html#ga39986d8afa000c44e22752383a48ae23">pi_cl_team_prepare_fork</a> (int nb_cores)</td></tr>
<tr class="memdesc:ga39986d8afa000c44e22752383a48ae23"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepare a team for a task.  <a href="#ga39986d8afa000c44e22752383a48ae23">More...</a><br /></td></tr>
<tr class="separator:ga39986d8afa000c44e22752383a48ae23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4a6e6d9ded056677b88c2aa5e268bdb2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ClusterTeam.html#ga4a6e6d9ded056677b88c2aa5e268bdb2">pi_cl_team_preset_fork</a> (void(*entry)(void *), void *arg)</td></tr>
<tr class="memdesc:ga4a6e6d9ded056677b88c2aa5e268bdb2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fork a the execution of the calling core.  <a href="#ga4a6e6d9ded056677b88c2aa5e268bdb2">More...</a><br /></td></tr>
<tr class="separator:ga4a6e6d9ded056677b88c2aa5e268bdb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa771d5413b251c1ba09de58184aa50a7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ClusterTeam.html#gaa771d5413b251c1ba09de58184aa50a7">pi_cl_team_fork_task</a> (struct pi_cl_team_task *fork_task)</td></tr>
<tr class="memdesc:gaa771d5413b251c1ba09de58184aa50a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fork the execution of the calling core using task.  <a href="#gaa771d5413b251c1ba09de58184aa50a7">More...</a><br /></td></tr>
<tr class="separator:gaa771d5413b251c1ba09de58184aa50a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8feb0c8d0540929c75b3c358ca57fc10"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ClusterTeam.html#ga8feb0c8d0540929c75b3c358ca57fc10">pi_cl_team_barrier</a> ()</td></tr>
<tr class="memdesc:ga8feb0c8d0540929c75b3c358ca57fc10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Execute a barrier between all cores of the team.  <a href="#ga8feb0c8d0540929c75b3c358ca57fc10">More...</a><br /></td></tr>
<tr class="separator:ga8feb0c8d0540929c75b3c358ca57fc10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga14668897863a32d79a9758859259ff18"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ClusterTeam.html#ga14668897863a32d79a9758859259ff18">pi_cl_team_critical_enter</a> (void)</td></tr>
<tr class="memdesc:ga14668897863a32d79a9758859259ff18"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enter a critical section.  <a href="#ga14668897863a32d79a9758859259ff18">More...</a><br /></td></tr>
<tr class="separator:ga14668897863a32d79a9758859259ff18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7f199bc399d77a05cbc0c9b7e37a2b88"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ClusterTeam.html#ga7f199bc399d77a05cbc0c9b7e37a2b88">pi_cl_team_critical_exit</a> (void)</td></tr>
<tr class="memdesc:ga7f199bc399d77a05cbc0c9b7e37a2b88"><td class="mdescLeft">&#160;</td><td class="mdescRight">Exit a critical section.  <a href="#ga7f199bc399d77a05cbc0c9b7e37a2b88">More...</a><br /></td></tr>
<tr class="separator:ga7f199bc399d77a05cbc0c9b7e37a2b88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad85546f51f75251680623ad3143a5489"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ClusterTeam.html#gad85546f51f75251680623ad3143a5489">pi_cl_team_nb_cores</a> ()</td></tr>
<tr class="memdesc:gad85546f51f75251680623ad3143a5489"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the number of cores in the team.  <a href="#gad85546f51f75251680623ad3143a5489">More...</a><br /></td></tr>
<tr class="separator:gad85546f51f75251680623ad3143a5489"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Description</h2>
<p>Once a cluster entry point has been entered by cluster controller core, all the following primitives can be used to do multi-core processing, in a fork-join manner (like OMP parallel primitive).</p>
<p>The execution can first be forked in order to activate more cores, and then synchronized together using barriers. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="gaefb50573dcd73b1f767db380688753ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaefb50573dcd73b1f767db380688753ed">&#9670;&nbsp;</a></span>pi_cl_cluster_nb_cores()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int pi_cl_cluster_nb_cores </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This will return the number of slave cores present in the cluster, available to share/fork a task.</p>
<dl class="section return"><dt>Returns</dt><dd>Number of cores. </dd></dl>

</div>
</div>
<a id="ga8feb0c8d0540929c75b3c358ca57fc10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8feb0c8d0540929c75b3c358ca57fc10">&#9670;&nbsp;</a></span>pi_cl_team_barrier()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pi_cl_team_barrier </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This will block the execution of each calling core until all cores have reached the barrier. The set of cores participating in the barrier is the one created with the last fork. Each core of the team must execute the barrier exactly once for all cores to be able to go through the barrier. </p>

</div>
</div>
<a id="ga14668897863a32d79a9758859259ff18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga14668897863a32d79a9758859259ff18">&#9670;&nbsp;</a></span>pi_cl_team_critical_enter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pi_cl_team_critical_enter </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This will block the execution of the calling core until it can execute the following section of code alone. This will also prevent all other cores of the team to execute the following code until <a class="el" href="group__ClusterTeam.html#ga7f199bc399d77a05cbc0c9b7e37a2b88">pi_cl_team_critical_exit()</a> is called.</p>
<dl class="section note"><dt>Note</dt><dd>No runtime functions should be called from within the critical section, only application code is allowed. </dd></dl>

</div>
</div>
<a id="ga7f199bc399d77a05cbc0c9b7e37a2b88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7f199bc399d77a05cbc0c9b7e37a2b88">&#9670;&nbsp;</a></span>pi_cl_team_critical_exit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pi_cl_team_critical_exit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This will exit the critical code and let other cores executing it. </p>

</div>
</div>
<a id="ga5794ffc121cc284b7178cb5b5b457a04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5794ffc121cc284b7178cb5b5b457a04">&#9670;&nbsp;</a></span>pi_cl_team_fork()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pi_cl_team_fork </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nb_cores</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(void *)&#160;</td>
          <td class="paramname"><em>entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Calling this function will create a team of workers and call the specified entry point on each core of the team to start multi-core processing. The team parameters (number of cores and stacks) are by default the ones configured when sending a task to cluster from the fabric controller. It is possible to use different parameters when doing a new fork. If this is done the new parameters will become the new default ones.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">nb_cores</td><td>Number of cores to execute the task/entry point.. </td></tr>
    <tr><td class="paramname">entry</td><td>Function entry point to be executed by team of workers. </td></tr>
    <tr><td class="paramname">arg</td><td>Argument of the function entry point.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>If <em>nb_cores</em> is zero, fork is done reusing the cores_mask of the previous fork or the default. </dd>
<dd>
If the number of cores is not provided (i.e. is zero), the number of cores of the previous fork will be reused. Doing this has less runtime overhead. </dd></dl>

</div>
</div>
<a id="gaa771d5413b251c1ba09de58184aa50a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa771d5413b251c1ba09de58184aa50a7">&#9670;&nbsp;</a></span>pi_cl_team_fork_task()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pi_cl_team_fork_task </td>
          <td>(</td>
          <td class="paramtype">struct pi_cl_team_task *&#160;</td>
          <td class="paramname"><em>fork_task</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is similar to pi_cl_team_fork but takes a task as parameter, which allows setting more parameters. Calling this function will create a team of workers and call the specified entry point on each core of the team to start multi-core processing with the team parameters specified in the task.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fork_task</td><td>Task to be forked on slave cores. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gad85546f51f75251680623ad3143a5489"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad85546f51f75251680623ad3143a5489">&#9670;&nbsp;</a></span>pi_cl_team_nb_cores()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pi_cl_team_nb_cores </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This will return the number of cores involved in the team created by the active fork operation.</p>
<dl class="section return"><dt>Returns</dt><dd>The number of cores of the team. </dd></dl>

</div>
</div>
<a id="ga39986d8afa000c44e22752383a48ae23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga39986d8afa000c44e22752383a48ae23">&#9670;&nbsp;</a></span>pi_cl_team_prepare_fork()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pi_cl_team_prepare_fork </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nb_cores</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is called to set up a team of workers. This function has the same behaviour as <a class="el" href="group__ClusterTeam.html#ga5794ffc121cc284b7178cb5b5b457a04">pi_cl_team_fork()</a>, but here the fork is not done, thus a call to <a class="el" href="group__ClusterTeam.html#ga4a6e6d9ded056677b88c2aa5e268bdb2">pi_cl_team_preset_fork()</a> is needed in order to dispatch the task to the team of workers.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">nb_cores</td><td>Number of cores to execute the entry point </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga4a6e6d9ded056677b88c2aa5e268bdb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4a6e6d9ded056677b88c2aa5e268bdb2">&#9670;&nbsp;</a></span>pi_cl_team_preset_fork()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pi_cl_team_preset_fork </td>
          <td>(</td>
          <td class="paramtype">void(*)(void *)&#160;</td>
          <td class="paramname"><em>entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is to be called after <a class="el" href="group__ClusterTeam.html#ga39986d8afa000c44e22752383a48ae23">pi_cl_team_prepare_fork()</a>. A call to this function will fork the function entry point between a preset team of workers.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">entry</td><td>Function entry point to be executed by team of workers. </td></tr>
    <tr><td class="paramname">arg</td><td>Argument of the function entry point.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Calling <a class="el" href="group__ClusterTeam.html#ga39986d8afa000c44e22752383a48ae23" title="Prepare a team for a task. ">pi_cl_team_prepare_fork()</a> then <a class="el" href="group__ClusterTeam.html#ga4a6e6d9ded056677b88c2aa5e268bdb2" title="Fork a the execution of the calling core. ">pi_cl_team_preset_fork()</a> is no different than calling <a class="el" href="group__ClusterTeam.html#ga5794ffc121cc284b7178cb5b5b457a04" title="Fork the execution of the calling core. ">pi_cl_team_fork()</a> once. But when forking multiple times with the same team of workers, calling these two functions prevent from having an overhead due to barrier setups, ie first call <a class="el" href="group__ClusterTeam.html#ga39986d8afa000c44e22752383a48ae23" title="Prepare a team for a task. ">pi_cl_team_prepare_fork()</a> to set the team then multiple calls to <a class="el" href="group__ClusterTeam.html#ga4a6e6d9ded056677b88c2aa5e268bdb2" title="Fork a the execution of the calling core. ">pi_cl_team_preset_fork()</a>. </dd>
<dd>
Workers are exclusively slave cores. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Sep 7 2020 11:22:11 for  by GreenWaves Technologies
	<!--
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 
	-->
	</li>
  </ul>
</div>
</body>
</html>
